name: yieldops-api
service:
  type: web
  ports:
    - port: 8000
      protocol: http
  routes:
    - path: /
  command: uvicorn app.main:app --host 0.0.0.0 --port 8000
  root_directory: apps/api
  env:
    - name: SUPABASE_URL
      value: "SET_IN_KOYEB_DASHBOARD"
    - name: SUPABASE_ANON_KEY
      value: "SET_IN_KOYEB_DASHBOARD"
    - name: SUPABASE_SERVICE_KEY
      value: "SET_IN_KOYEB_DASHBOARD"
    - name: PORT
      value: "8000"
    - name: AUTO_INIT_MODEL
      value: "true"
  instance_type: nano
  scaling:
    min: 1
    max: 1
  healthcheck:
    http:
      port: 8000
      path: /health
  skip_cache: true
